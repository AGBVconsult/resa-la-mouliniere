# Sprint Status — Hardening MVP
# Generated: 2026-01-22
# Updated: 2026-01-25
# Project: la-mouliniere

current_sprint: 2
sprint_name: "Production Fixes & Emails"
sprint_goal: "Corriger les bugs production et améliorer le système d'emails"
sprint_status: "in_progress"
start_date: "2026-01-25"
end_date: null
actual_effort: null

# STATUS VALUES:
# - not_started: Work has not begun
# - in_progress: Currently being worked on
# - blocked: Cannot proceed due to dependency or issue
# - review: Completed, awaiting review
# - done: Completed and verified
# - idea: Feature idea to brainstorm

epics:
  epic-1:
    name: "Hardening MVP Production"
    status: done
    stories:
      1-1-toast-global:
        name: "Composant Toast Global"
        status: done
        priority: P1
        effort: 45min
        assignee: null
        completed_at: "2026-01-22"
      1-2-format-error:
        name: "Helper formatConvexError"
        status: done
        priority: P1
        effort: 30min
        assignee: null
        completed_at: "2026-01-22"
      1-3-toast-floorplan:
        name: "Intégration Toast ServiceFloorPlan"
        status: done
        priority: P1
        effort: 30min
        assignee: null
        depends_on: ["1-1-toast-global", "1-2-format-error"]
        completed_at: "2026-01-22"
      1-4-toast-autres:
        name: "Intégration Toast autres composants"
        status: done
        priority: P1
        effort: 15min
        assignee: null
        depends_on: ["1-3-toast-floorplan"]
        completed_at: "2026-01-22"
      1-5-tests-e2e-admin:
        name: "Tests E2E Admin"
        status: done
        priority: P2
        effort: 1h30
        assignee: null
        completed_at: "2026-01-22"
      1-6-tests-e2e-client:
        name: "Tests E2E Client"
        status: done
        priority: P2
        effort: 1h
        assignee: null
        completed_at: "2026-01-22"
      1-7-role-gate:
        name: "Role Gate Frontend"
        status: done
        priority: P2
        effort: 30min
        assignee: null
        completed_at: "2026-01-22"
    epic-1-retrospective:
      status: not_started

  epic-2:
    name: "Emails & Notifications"
    status: in_progress
    stories:
      2-1-fix-admin-status-emails:
        name: "Fix emails changement statut admin"
        status: not_started
        priority: P1
        effort: 1h
        assignee: null
        type: bug
        description: "Les emails ne sont pas envoyés quand l'admin confirme/annule une réservation"
      2-2-email-noshow:
        name: "Email No-show au client"
        status: idea
        priority: P2
        effort: 2h
        assignee: null
        type: feature
        description: "Envoyer un email au client quand sa réservation est marquée no-show"
        brainstorm_needed: true

  epic-3:
    name: "UX Widget Réservation"
    status: not_started
    stories:
      3-1-supprimer-checkbox-annulation:
        name: "Supprimer case à cocher Politique d'annulation"
        status: idea
        priority: P2
        type: feature
        description: "Enlever la case à cocher 'Politique d'annulation' sur la dernière étape"
      3-2-texte-regles-resto:
        name: "Remplacer texte infos pratiques par règles resto"
        status: idea
        priority: P2
        type: feature
        description: "Remplacer 'J'ai lu les infos pratiques' par texte explicatif des règles du resto (contenu à définir)"
        brainstorm_needed: true
      3-3-reduire-hauteur-recap:
        name: "Réduire hauteur card Récapitulatif"
        status: idea
        priority: P3
        type: feature
        description: "Diminuer la hauteur de la card récapitulatif sur la dernière étape"
      3-4-creneaux-heure-actuelle:
        name: "Masquer créneaux passés du jour"
        status: idea
        priority: P2
        type: bug
        description: "Les créneaux horaires affichés ne peuvent être antérieurs à l'heure actuelle du jour"

# Sprint Metrics
metrics:
  total_stories: 13
  completed: 7
  in_progress: 0
  blocked: 0
  ideas: 5
  velocity_target: 13
  velocity_actual: 7
  completion_rate: "54%"
  
# Deliverables
deliverables:
  files_created:
    - "src/components/ui/toast.tsx"
    - "src/components/ui/toaster.tsx"
    - "src/hooks/use-toast.ts"
    - "src/lib/formatError.ts"
    - "src/components/admin/AdminLayoutClient.tsx"
    - "src/app/(auth)/admin/access-denied/page.tsx"
  files_modified:
    - "src/app/(admin)/admin/layout.tsx"
    - "src/components/admin/floor-plan/ServiceFloorPlan.tsx"
    - "src/app/(admin)/admin/reservations/page.tsx"
    - "src/app/(admin)/admin/reservations/components/CreateReservationModal.tsx"
    - "e2e/admin.spec.ts"
    - "e2e/reservation-management.spec.ts"
    - "e2e/widget-reservation.spec.ts"
  commit: "c22cae5"

# Notes
notes:
  - "✅ Phase 1 (P1): Toast + formatError = 2h - TERMINÉ"
  - "✅ Phase 2 (P2): Tests E2E + Role gate = 3h - TERMINÉ"
  - "✅ Tests E2E: 42 tests (34 pass, 8 skip auth-required)"
  - "✅ Commit final: c22cae5 (inclut hotfixes auth Clerk post-sprint)"
